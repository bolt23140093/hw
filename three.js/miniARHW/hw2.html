<!DOCTYPE html>

<html>

<head>

<div id="info">H2
<br>
<button id='toggle' style="width:20%">turn</button>
<p id ="text"style= "color:white;text-align:center;">
color
</p>
</div>
<script src="https://threejs.org/build/three.min.js"></script>
<script src="https://threejs.org/examples/js/controls/OrbitControls.js">
</script>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>


<style>

#info {
  position: absolute;
  top: 0px;
  width: 100%;
  padding: 10px;
  text-align: center;
  color: #ffff00;
}

body {
  overflow: hidden;
}


</style>
</head>

<body> 
<script>

var camera, scene, renderer;
var angle=0;
//var turn = false;
let group = new THREE.Group();
var isActive = false;
var omega = 0;

init();
animate();

$("#toggle").click(function() {
  isActive = !isActive;
});

function init() {

  scene = new THREE.Scene();

  renderer = new THREE.WebGLRenderer();
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setClearColor(0x888888);
  document.body.appendChild(renderer.domElement);

  camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 1000);
  camera.position.z = 500;
  let controls = new THREE.OrbitControls(camera, renderer.domElement);

  ////////////////////////////////////////////////////////////////
  var gridXZ = new THREE.GridHelper(200, 20, 'red', 'white');
  scene.add(gridXZ);
  
  //let group = new THREE.Group();
  scene.add(group);
  
  let poi = new THREE.Mesh(new THREE.BoxGeometry(1,1,10),new THREE.MeshNormalMaterial());
  poi.rotateY(Math.PI/2);
  poi.position.x = 15;
  scene.add(poi);
  
  let geometry0 = new THREE.CircleGeometry( 20, 32 ,0,2*Math.PI/3);
let material0 = new THREE.MeshBasicMaterial( { color: 0xffff00 } );
let circle0 = new THREE.Mesh( geometry0, material0 );
circle0.rotateX(-90*Math.PI/180);
group.add( circle0 );

 let geometry1 = new THREE.CircleGeometry( 20, 32 ,2*Math.PI/3,2*Math.PI/3);
let material1 = new THREE.MeshBasicMaterial( { color: 0xff0000 } );
let circle1 = new THREE.Mesh( geometry1, material1 );
circle1.rotateX(-90*Math.PI/180);
group.add( circle1 );

 let geometry2 = new THREE.CircleGeometry( 20, 32 ,2*Math.PI/3 + 2/3*Math.PI,2*Math.PI/3);
let material2 = new THREE.MeshBasicMaterial( { color: 0x00ffff } );
let circle2 = new THREE.Mesh( geometry2, material2 );
circle2.rotateX(-90*Math.PI/180);
group.add( circle2 );


}

function clamp(x,xlo,xhi){
	if(x<xlo) return xlo;
  if(x>xhi) return xhi;
  else return x;
}

function animate() {
	var dt=0.2;
  var maxOmega=10;
  
  var anscolor=angle%(Math.PI*2);
  if(anscolor>=0 && anscolor<2*Math.PI/3){
  	//console.log('y');
    $("#text").css("color",'blue');
  }else if(anscolor>=2*Math.PI/3 && anscolor<2*2*Math.PI/3){
  	//console.log('r');
    $("#text").css("color",'red');
  }else{
  	//console.log('b');
    $("#text").css("color",'yellow');
  }
  
  
  
 if(isActive){
 	omega = omega + 5*dt;
 }
 else{
 	omega = omega - 0.2*dt;
 }
 omega = clamp(omega,0,maxOmega);
 
 angle +=omega*dt;
  group.rotation.y = angle;
  
  requestAnimationFrame(animate);
  render();
  

}

function render() {

  renderer.render(scene, camera);

}


</script>
</body>

</html>